<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>留学趋势看板 | e-Stat 官方数据</title>
    <meta name="description" content="基于日本政府官方统计(e-Stat)的留学趋势分析看板，涵盖留学生规模、在留资格、生活成本、就业市场等核心指标。">

    <!-- 字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>

    <!-- 样式 -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/trend.css">
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="container navbar-content">
            <div class="navbar-brand">
                <a href="../index.html" class="navbar-logo">📊</a>
                <span class="navbar-title">留学趋势看板</span>
                <span class="data-badge">e-Stat 官方数据</span>
            </div>
            <button class="navbar-toggle" id="navbarToggle" aria-label="打开导航菜单">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <ul class="navbar-nav" id="navbarNav">
                <li><a href="#dashboard" class="active">趋势总览</a></li>
                <li><a href="#students">留学生规模</a></li>
                <li><a href="#visa">在留资格</a></li>
                <li><a href="#living">生活成本</a></li>
                <li><a href="#jobs">打工就业</a></li>
                <li><a href="#compare">城市对比</a></li>
                <li><a href="../index.html" class="nav-back">← 返回报告</a></li>
            </ul>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="trend-main">
        <!-- 控制区 -->
        <section class="control-bar">
            <div class="container">
                <div class="control-content">
                    <div class="time-range-selector">
                        <button class="time-btn" data-range="12m">近12个月</button>
                        <button class="time-btn active" data-range="5y">近5年</button>
                        <button class="time-btn" data-range="all">全部历史</button>
                    </div>
                    <div class="data-info">
                        <span class="sync-status" id="syncStatus">
                            <span class="sync-dot"></span>
                            <span class="sync-text">检查中...</span>
                        </span>
                        <span class="update-time">更新于: <span id="lastUpdate">--</span></span>
                        <span class="next-update">下次更新: <span id="nextUpdate">--</span></span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard 核心指标卡片 -->
        <section id="dashboard" class="dashboard-section">
            <div class="container">
                <h2 class="section-title">📊 核心指标一览</h2>

                <div class="metrics-grid">
                    <!-- 卡片1: 外国人学生总数 -->
                    <div class="metric-card" data-metric="students">
                        <div class="metric-header">
                            <span class="metric-icon">🎓</span>
                            <span class="metric-label">外国人学生总数</span>
                        </div>
                        <div class="metric-value">
                            <span class="value" id="studentsValue">--</span>
                            <span class="unit">万人</span>
                        </div>
                        <div class="metric-change positive" id="studentsChange">
                            <span class="arrow">↑</span>
                            <span class="percent">--</span>
                            <span class="period">同比</span>
                        </div>
                        <div class="metric-chart" id="chartStudentsMini"></div>
                        <div class="metric-insight" id="studentsInsight">加载中...</div>
                    </div>

                    <!-- 卡片2: 留学签证人数 -->
                    <div class="metric-card" data-metric="visa">
                        <div class="metric-header">
                            <span class="metric-icon">🛂</span>
                            <span class="metric-label">在留资格=留学</span>
                        </div>
                        <div class="metric-value">
                            <span class="value" id="visaValue">--</span>
                            <span class="unit">万人</span>
                        </div>
                        <div class="metric-change positive" id="visaChange">
                            <span class="arrow">↑</span>
                            <span class="percent">--</span>
                            <span class="period">同比</span>
                        </div>
                        <div class="metric-chart" id="chartVisaMini"></div>
                        <div class="metric-insight" id="visaInsight">加载中...</div>
                    </div>

                    <!-- 卡片3: CPI指数 -->
                    <div class="metric-card" data-metric="cpi">
                        <div class="metric-header">
                            <span class="metric-icon">💰</span>
                            <span class="metric-label">消费者物价指数</span>
                        </div>
                        <div class="metric-value">
                            <span class="value" id="cpiValue">--</span>
                            <span class="unit">指数</span>
                        </div>
                        <div class="metric-change negative" id="cpiChange">
                            <span class="arrow">↑</span>
                            <span class="percent">--</span>
                            <span class="period">同比</span>
                        </div>
                        <div class="metric-chart" id="chartCPIMini"></div>
                        <div class="metric-insight" id="cpiInsight">加载中...</div>
                    </div>

                    <!-- 卡片4: 有效求人倍率 -->
                    <div class="metric-card" data-metric="jobs">
                        <div class="metric-header">
                            <span class="metric-icon">💼</span>
                            <span class="metric-label">有效求人倍率</span>
                        </div>
                        <div class="metric-value">
                            <span class="value" id="jobsValue">--</span>
                            <span class="unit">倍</span>
                        </div>
                        <div class="metric-change neutral" id="jobsChange">
                            <span class="arrow">→</span>
                            <span class="percent">--</span>
                            <span class="period">同比</span>
                        </div>
                        <div class="metric-chart" id="chartJobsMini"></div>
                        <div class="metric-insight" id="jobsInsight">加载中...</div>
                    </div>
                </div>

                <!-- 快捷入口 -->
                <div class="quick-links">
                    <a href="#students" class="quick-link">
                        <span class="ql-icon">📚</span>
                        <span class="ql-text">留学生规模详情</span>
                    </a>
                    <a href="#visa" class="quick-link">
                        <span class="ql-icon">🛂</span>
                        <span class="ql-text">在留资格分析</span>
                    </a>
                    <a href="#living" class="quick-link">
                        <span class="ql-icon">🏠</span>
                        <span class="ql-text">生活成本对比</span>
                    </a>
                    <a href="#jobs" class="quick-link">
                        <span class="ql-icon">💼</span>
                        <span class="ql-text">就业市场动态</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- 留学生规模 -->
        <section id="students" class="theme-section">
            <div class="container">
                <h2 class="section-title">📚 留学生规模分析</h2>

                <div class="charts-grid">
                    <div class="chart-container large">
                        <div class="chart-header">
                            <h3 class="chart-title">外国人学生年度趋势</h3>
                            <span class="precision-badge official">官方数据</span>
                        </div>
                        <div class="chart-body" id="chartStudentsTrend"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">国籍/地区 Top10</h3>
                        </div>
                        <div class="chart-body" id="chartStudentsNationality"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">学科结构变化</h3>
                        </div>
                        <div class="chart-body" id="chartStudentsField"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">学校类型分布</h3>
                        </div>
                        <div class="chart-body" id="chartStudentsSchool"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 在留资格 -->
        <section id="visa" class="theme-section">
            <div class="container">
                <h2 class="section-title">🛂 在留资格（留学签证）</h2>

                <div class="charts-grid">
                    <div class="chart-container large">
                        <div class="chart-header">
                            <h3 class="chart-title">留学签证人数趋势</h3>
                            <span class="precision-badge official">官方数据</span>
                        </div>
                        <div class="chart-body" id="chartVisaTrend"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">都道府县分布</h3>
                        </div>
                        <div class="chart-body" id="chartVisaPrefecture"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">国籍分布</h3>
                        </div>
                        <div class="chart-body" id="chartVisaNationality"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 生活成本 -->
        <section id="living" class="theme-section">
            <div class="container">
                <h2 class="section-title">💰 生活成本分析</h2>

                <div class="charts-grid">
                    <div class="chart-container large">
                        <div class="chart-header">
                            <h3 class="chart-title">CPI 指数趋势</h3>
                            <span class="precision-badge official">官方数据</span>
                        </div>
                        <div class="chart-body" id="chartCPITrend"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">主要城市租金对比</h3>
                        </div>
                        <div class="chart-body" id="chartRentCompare"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">生活篮子价格趋势</h3>
                        </div>
                        <div class="chart-body" id="chartLivingBasket"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 打工与就业 -->
        <section id="jobs" class="theme-section">
            <div class="container">
                <h2 class="section-title">💼 打工与就业市场</h2>

                <div class="charts-grid">
                    <div class="chart-container large">
                        <div class="chart-header">
                            <h3 class="chart-title">有效求人倍率趋势</h3>
                            <span class="precision-badge official">官方数据</span>
                        </div>
                        <div class="chart-body" id="chartJobsTrend"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">就业/失业率趋势</h3>
                        </div>
                        <div class="chart-body" id="chartEmployment"></div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-header">
                            <h3 class="chart-title">工资趋势（名目 vs 实际）</h3>
                        </div>
                        <div class="chart-body" id="chartWages"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 城市对比 -->
        <section id="compare" class="theme-section">
            <div class="container">
                <h2 class="section-title">🏙️ 城市对比分析</h2>

                <div class="compare-controls">
                    <p class="compare-hint">选择 2-4 个城市进行多维度对比</p>
                    <div class="city-selector">
                        <label class="city-option">
                            <input type="checkbox" value="tokyo" checked> 東京都
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="osaka" checked> 大阪府
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="kyoto"> 京都府
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="fukuoka"> 福岡県
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="aichi"> 愛知県
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="hyogo"> 兵庫県
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="chiba"> 千葉県
                        </label>
                        <label class="city-option">
                            <input type="checkbox" value="saitama"> 埼玉県
                        </label>
                    </div>
                    <button class="compare-btn" id="runCompare">开始对比</button>
                </div>

                <div class="compare-results" id="compareResults">
                    <div class="compare-panel">
                        <h3 class="panel-title">租金水平</h3>
                        <div class="chart-body" id="chartCompareRent"></div>
                    </div>
                    <div class="compare-panel">
                        <h3 class="panel-title">物价指数</h3>
                        <div class="chart-body" id="chartCompareCPI"></div>
                    </div>
                    <div class="compare-panel">
                        <h3 class="panel-title">求人倍率</h3>
                        <div class="chart-body" id="chartCompareJobs"></div>
                    </div>
                    <div class="compare-panel">
                        <h3 class="panel-title">留学生人数</h3>
                        <div class="chart-body" id="chartCompareStudents"></div>
                    </div>
                </div>

                <div class="compare-actions">
                    <button class="action-btn" id="shareLink">🔗 生成分享链接</button>
                    <button class="action-btn" id="exportImage">📷 导出为图片</button>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                数据来源: <a href="https://www.e-stat.go.jp/" target="_blank">日本政府统计 e-Stat</a> |
                报告制作: 中日留学调研团队 |
                © 2024-2025
            </p>
        </div>
    </footer>

    <!-- 脚本 -->
    <script src="../js/trend/api.js"></script>
    <script src="../js/trend/dashboard.js"></script>
</body>

</html>